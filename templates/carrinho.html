<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seu Carrinho</title>
</head>

<body>
    <h1>Seu Carrinho</h1>

    {% if itens %}
    {% for item in itens %}
    <div class="item-carrinho">
        <h3>{{ item.nome }}</h3>
        <p>Preço: R$ {{ item.preco_display }}</p>
        <p>Quantidade atual: {{ item.quantidade }}</p>
        <p>Subtotal: R$ {{ item.subtotal_display }}</p>
>
        <form action="/atualizar_carrinho/{{ item.carrinho_id }}" method="POST">
            <input type="number" name="quantidade" value="{{ item.quantidade }}" min="1">
            <button type="submit">Atualizar</button>
        </form>

        <form action="/remover_do_carrinho/{{ item.carrinho_id }}" method="POST">
            <button type="submit">Remover</button>
        </form>

        <hr>
    </div>
    {% endfor %}

    <h2>Total: R$ {{ total_display }}</h2>

    {% if total_desconto_display %}
    <h3>Total com desconto: R$ {{ total_desconto_display }}</h3>
    <p><strong>Cupom aplicado:</strong> {{ cupom_aplicado }}</p>
    {% endif %}

    <form action="/aplicar_cupom" method="POST">
        <input type="text" name="cupom" placeholder="Insira o cupom de desconto">
        <button type="submit">Aplicar Cupom</button>
    </form>

    {% if mensagem_cupom %}
    <p><strong>{{ mensagem_cupom }}</strong></p>
    {% endif %}

    {% else %}
    <p>Seu carrinho está vazio.</p>
    {% endif %}

    <hr>
    <h3>Calcular Frete</h3>

    <div id="frete">
        <form id="form-frete">
            <label>CEP:
                <input type="text" id="cep" name="cep" maxlength="9" placeholder="00000-000" required>
            </label>

            <button type="submit">Calcular Frete</button>
        </form>

        <div id="resultado" style="margin-top: 10px; font-weight: bold;"></div>
    </div>

    <script src="/static/scripts/calcular_frete.js"></script>
    
</body>

</html>
